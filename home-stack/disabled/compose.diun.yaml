services:
  # Docker update notifier
  diun:
    image: docker.io/crazymax/diun:4.28.0@sha256:28e86edddcfd912e5122327c7df9bff3f313f1b7bcdfaf178c0bca7ffa21e587
    container_name: diun
    restart: unless-stopped
    cpus: 1
    mem_limit: 128m
    user: ${UID}:${GID}
    environment:
      - TZ=${TZ}
      - LOG_LEVEL=error
      - LOG_JSON=false
      - DIUN_DB_PATH=diun.db
      - DIUN_WATCH_FIRSTCHECKNOTIF=false
      - DIUN_WATCH_WORKERS=10
      - DIUN_WATCH_SCHEDULE=0 0 0 * * * 
      - DIUN_PROVIDERS_DOCKER=true
      - DIUN_PROVIDERS_DOCKER_WATCHSTOPPED=false
      - DIUN_NOTIF_SLACK_WEBHOOKURL=${WEBHOOK_DIUN}
    volumes:
      - ${USER_DIR}/diun/data:/data
      - /var/run/docker.sock:/var/run/docker.sock
    labels:
      - diun.enable=true
    networks:
      - reverse-proxy
networks:
  reverse-proxy:
    external: true
    name: reverse-proxy_default
