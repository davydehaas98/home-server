services:
  # https://hub.docker.com/r/screepers/screeps-launcher
  screeps:
    image: screepers/screeps-launcher:v1.16.0@sha256:46ae19649731243aaa932b75d257d3ba82d71c5bd337bdac777860f158fbefba
    container_name: screeps
    restart: unless-stopped
    cpus: 4
    mem_limit: 8G
    user: ${UID}:${GID}
    environment:
    - TZ=${TZ}
    - MONGO_HOST=mongo
    - REDIS_HOST=redis
    volumes:
    - ${USER_DIR}/screeps:/screeps
    ports:
    - 21025:21025/tcp
  mongo:
    image: mongo:7.0.14@sha256:244afb1488edfc42aaa8ffa6153393bbc075d63516ab0305daa2eaa35241eb52
    container_name: screeps-mongo
    restart: unless-stopped
    volumes:
    - ${USER_DIR}/screeps-mongo:/data/db
  redis:
    image: redis:7.4.0@sha256:6725a7dc7a44a6486b9d0a5172b10ccaf0c2ea600df87c0b93450d0e7769297f
    container_name: screeps-redis
    restart: unless-stopped
    volumes:
    - ${USER_DIR}/screeps-redis:/data