services:
  influxdb:
    image: influxdb:2.7.7@sha256:fd9b2692e0291b9f7731171de82a5943ea23356b0bee358cf9a7336b7260c65d
    container_name: influxdb
    restart: unless-stopped
    ports:
    - 8086:8086
  telegraf:
    image: telegraf:1.26.3@sha256:17b23ec44097c8703b2f80aaae2dc49ae4eb25709cda892362b4f5b03c05cef3
    container_name: telegraf
    restart: unless-stopped
    volumes:
    - ${USER_DIR}/telegraf:/etc/telegraf
    ports:
    - 8094:8094
    depends_on:
    - influxdb
  minecraft-monitor:
    image: itzg/mc-monitor:0.11.2@sha256:42f3905a3ec2f1727b4f9357c5039b00d89790c7b3ed8885c98895560401a500
    container_name: minecraft-monitor
    restart: unless-stopped
    command: gather-for-telegraf export-for-prometheus
    environment:
    - GATHER_INTERVAL=10s
    - GATHER_TELEGRAF_ADDRESS=telegraf:8094
    - GATHER_SERVERS=mc.hypixel.net
    depends_on:
    - telegraf