services:
  cloudflare-ddns:
    image: docker.io/favonia/cloudflare-ddns:1.15.1
    container_name: cloudflare-ddns
    deploy:
      resources:
        limits:
          cpus: '0.1'
          memory: 64M
        reservations:
          cpus: '0.01'
          memory: 32M
      restart_policy:
        condition: on-failure
        delay: 5s
        max_attempts: 3
        window: 60s
    read_only: true
    security_opt:
      - no-new-privileges:true
    network_mode: host
    environment:
      CLOUDFLARE_API_TOKEN: ${CLOUDFLARE_API_TOKEN:?error}
      DOMAINS: ${DOMAIN_NAME:?error}
      PROXIED: false
      # RRTYPE: A
      DELETE_ON_STOP: false
